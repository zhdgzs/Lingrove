# Change: 添加翻译切换、自动同步和 IP 过滤功能

## 概述

本提案为 Lingrove 浏览器插件添加三个用户体验增强功能：

1. **翻译切换功能**：Alt+T 快捷键支持在翻译和原文之间切换，无需重新请求 AI
2. **坚果云自动同步**：可选的后台自动同步功能，每小时检查并同步数据
3. **IP 地址过滤**：在站点过滤中添加"跳过所有 IP 地址"选项

## Why

### 1. 翻译切换
用户在阅读翻译内容时，有时需要查看原文以理解准确含义。当前需要刷新页面或重新触发翻译，体验不佳。通过 Alt+T 快捷键切换，可以即时在翻译和原文之间切换，且不消耗 API 配额。

### 2. 自动同步
当前坚果云同步需要手动操作，对于需要多设备同步的用户不够便利。自动同步功能可以在后台定期同步数据，使用 `auto_sync_{YYYY-MM-DD}.json` 命名，每天同步一次，自动清理旧文件，始终只保留一个最新文件。

### 3. IP 地址过滤
用户在访问本地开发环境（如 localhost、192.168.x.x）或内网服务时，不希望触发翻译。通过一键跳过所有 IP 地址，可以避免逐个添加到排除列表。

## What Changes

### 新增文件
- 无

### 修改文件
- `js/background.js` - 添加快捷键切换逻辑、自动同步定时器
- `js/content/main.js` - 添加翻译状态管理、IP 地址检测
- `js/content/text-replacer.js` - 优化切换逻辑
- `js/options.js` - 添加自动同步开关、IP 过滤选项
- `options.html` - 添加 UI 控件
- `manifest.json` - 添加 alarms 权限（用于定时器）

### 涉及的 Specs
- **新建** `translation-toggle` - 翻译切换功能规范
- **修改** `cloud-sync` - 添加自动同步需求
- **新建** `site-filtering` - 站点过滤规范（包含现有和新增功能）

### 用户价值

1. **提升阅读体验**：快速切换翻译/原文，无需刷新页面
2. **减少手动操作**：自动同步数据，多设备无缝衔接
3. **简化配置**：一键跳过所有 IP 地址，无需逐个添加

### 技术风险

- **低风险**：所有功能均为增量添加，不影响现有功能
- **兼容性**：需要添加 `alarms` 权限，但不影响现有用户
- **性能**：自动同步为可选功能，默认关闭，不影响性能
